.ll 6i
.TH SUBSCRIPTIONLIST 5 "4 November 1986"
.UC 4
.SH NAME
.B subscriptionlist
\- describe files to be updated by
.B track
.SH DESCRIPTION
.PP
A
.B subscriptionlist
defines a set of files to be considered for updating by the
.B track
system.
A
.B subscriptionlist
contains a set of
.I entries.
Each
.I entry
has 5 fields.
The fields are (in order) :
.RS
.ti -2
1) Name of the source file on the
.I librarian.
.ti -2
2) Name of the file on the
.I subscriber
machine to be used for determining if an update is necessary.
.ti -2
3) Name of the destination file on the
.I subscriber
machine.
.ti -2
4) A list of the files to be excluded from updating.
.ti -2
5) A shell script to be executed whenever an update is made.
.RE
.PP
Fields are separated by a colon.  The last field (and thus the entry) is terminated
with a newline.  White space is ignored in all fields except 4) and 5).
In 4), whitespace is used to separate entries.  In 5), all white space is
preserved and passed to /bin/sh. Newlines in 5) can be escaped
with a backslash.  The backslash will be removed before the script is sent to the shell.
Any characters after a hashmark, "# ", up to the end of line
will be considered to be comments and will be ignored.
.PP
If the name of a directory is used in any field,
.B track
treats the directory as being the root of a subtree.
If the name of a symbolic link is used in any field,
.B track
will handle the symbolic link itself and will NOT follow the link.
.PP
The action taken upon encountering
a blank field differs for each field.  The actions are:
.RS
.ti -2
1) Unrecoverable error -- this field must be filled in each
.I entry.
.ti -2
2) Use the name given in 1) of this entry.
.ti -2
3) Use the name given in 2) of this entry. If 2) is itself empty, use the name given in 2).
.ti -2
4) No effect
.ti -2
5) No effect
.RE
.SH EXAMPLES
.in 8
.ti -8
/etc/hosts : : : :
.br
This entry specifies that the file named "/etc/hosts".
.sp  1
.ti -8
/etc/host : : : :
.ti -8
/etc/services : : : :
.br
These entries specify both the files "/etc/hosts" and "/etc/services".
.sp  1
.ti -8
/usr/lib : : : :
.br
This entry specifies the entire subtree rooted at "/usr/lib".
.sp 1
.ti -8
/usr/lib : : : sendmail.cf uucp :
.br
This entry specifies files in the subtree rooted
at "/usr/lib" except for "/usr/lib/sendmail.cf" and all files
in the subtree rooted at "/usr/lib/uucp".
.bp
.ti -8
/usr/lib/aliases : : : : newaliases
.br
This entry specifies the file "/usr/lib/aliases" and
will execute the command "newaliases" if and only if a new version is successfully
copied.
.sp 1
.ti -8
/usr/lib/aliases : : : : newaliases \e
.ti -4
echo aliases file has been updated \(bv mail root
.br
This entry works exactly like the previous example and in addition sends mail
to the administrator.
.sp 1
.ti -8
/usr/lib/aliases : : : : newaliases \e
.ti -4
echo `date` /usr/lib/aliases >> /usr/adm/tracklog
.br
This entry works exactly like the previous example except that rather than
sending mail, a log entry containing the date and filename is appended to the
file named "/usr/adm/tracklog".
.sp 1
.ti -8
/usr/lib/aliases : /tmp/aliases : : : \e
.ti -4
echo new aliases file has arrived \(bv mail root
.br
This entry copies any new versions of the file named "/usr/lib/aliases" on the
.I librarian
to a locally named file "/tmp/aliases" and sends mail to the administrator.
.sp 1
.ti -8
/bin/sh : /bin/nsh : : : \e
.ti -4
mv /bin/sh /bin/osh \e
.ti -4
mv /bin/nsh /bin/sh \e
.ti -4
echo new shell installed \(bv  mail root
.br
This entry copies any new versions of the file named "/bin/sh" on the
.I librarian
to a locally named file "/bin/nsh", then saves "/bin/sh" in "/bin/osh", then moves the
the new version into "/bin/sh".
.sp 1
.ti -8
/usr/sys/GORP/vmunix : /vmunix : /nvmunix : : \e
.ti -4
mv /vmunix /ovmunix \e
.ti -4
mv /nvmunix /vmunix \e
.ti -4
shutdown -r now
.br
This entry causes
.B track
to compare the locally named file "/vmunix" with the
.I librarian's
file named
"/usr/sys/GORP/vmunix".  If the versions differ, the new version will be copied into
the locally named file "/nvmunix" and the shell script will be exectued to install
and reboot with the new kernel.
.in -8
.SH FILES
 .../track/slists/
.I subscriptionlist_name
.SH BUGS
A comment after the last entry will cause a fatal parsing error.
.SH "SEE ALSO"
track(1)
.br
statfile(5)
.br
When Network File Systems Aren't Enough: Automatic File Distribution Revisited
.br
.ti 5
by Daniel Nachbar
